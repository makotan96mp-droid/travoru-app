"use strict";

var _test = require("@playwright/test");
var _helpers = require("./helpers");
(0, _test.test)("メニュー: aria-expanded/ESC/外側クリック", async ({
  page
}) => {
  await (0, _helpers.waitDemoReady)(page);
  await (0, _helpers.dump)(page, "toolbar-menu-a11y-after-ready");
  const opened = await (0, _helpers.openMenu)(page);
  if (!opened) {
    await (0, _helpers.dump)(page, "menu-not-found");
    throw new Error("menu button not found");
  }
  const menuBtn = page.getByTestId("menu-btn");
  await (0, _test.expect)(menuBtn).toHaveAttribute("aria-expanded", "true");
  const panel = page.getByTestId("menu-panel");
  await (0, _test.expect)(panel).toBeVisible();
  await page.keyboard.press("Escape");
  await (0, _test.expect)(panel).toBeHidden();
  await (0, _test.expect)(menuBtn).toHaveAttribute("aria-expanded", "false");
  await (0, _test.expect)(await (0, _helpers.openMenu)(page)).toBeTruthy();
  await (0, _test.expect)(panel).toBeVisible();
  await page.mouse.click(0, 0);
  await (0, _test.expect)(panel).toBeHidden();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdGVzdCIsInJlcXVpcmUiLCJfaGVscGVycyIsInRlc3QiLCJwYWdlIiwid2FpdERlbW9SZWFkeSIsImR1bXAiLCJvcGVuZWQiLCJvcGVuTWVudSIsIkVycm9yIiwibWVudUJ0biIsImdldEJ5VGVzdElkIiwiZXhwZWN0IiwidG9IYXZlQXR0cmlidXRlIiwicGFuZWwiLCJ0b0JlVmlzaWJsZSIsImtleWJvYXJkIiwicHJlc3MiLCJ0b0JlSGlkZGVuIiwidG9CZVRydXRoeSIsIm1vdXNlIiwiY2xpY2siXSwic291cmNlcyI6WyJ0b29sYmFyLW1lbnUtYTExeS5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHRlc3QsIGV4cGVjdCB9IGZyb20gXCJAcGxheXdyaWdodC90ZXN0XCI7XG5pbXBvcnQgdHlwZSB7IFBhZ2UgfSBmcm9tIFwiQHBsYXl3cmlnaHQvdGVzdFwiO1xuaW1wb3J0IHsgd2FpdERlbW9SZWFkeSwgb3Blbk1lbnUsIGR1bXAsIG1lbnVQYW5lbExvY2F0b3IsIGNsb3NlTWVudSB9IGZyb20gXCIuL2hlbHBlcnNcIjtcblxudGVzdChcIuODoeODi+ODpeODvDogYXJpYS1leHBhbmRlZC9FU0Mv5aSW5YG044Kv44Oq44OD44KvXCIsIGFzeW5jICh7IHBhZ2UgfSkgPT4ge1xuICBhd2FpdCB3YWl0RGVtb1JlYWR5KHBhZ2UgYXMgUGFnZSk7XG4gIGF3YWl0IGR1bXAocGFnZSBhcyBQYWdlLCBcInRvb2xiYXItbWVudS1hMTF5LWFmdGVyLXJlYWR5XCIpO1xuXG4gIGNvbnN0IG9wZW5lZCA9IGF3YWl0IG9wZW5NZW51KHBhZ2UgYXMgUGFnZSk7XG4gIGlmICghb3BlbmVkKSB7XG4gICAgYXdhaXQgZHVtcChwYWdlIGFzIFBhZ2UsIFwibWVudS1ub3QtZm91bmRcIik7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwibWVudSBidXR0b24gbm90IGZvdW5kXCIpO1xuICB9XG4gIGNvbnN0IG1lbnVCdG4gPSBwYWdlLmdldEJ5VGVzdElkKFwibWVudS1idG5cIik7XG4gIGF3YWl0IGV4cGVjdChtZW51QnRuKS50b0hhdmVBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsIFwidHJ1ZVwiKTtcblxuICBjb25zdCBwYW5lbCA9IHBhZ2UuZ2V0QnlUZXN0SWQoXCJtZW51LXBhbmVsXCIpO1xuICBhd2FpdCBleHBlY3QocGFuZWwpLnRvQmVWaXNpYmxlKCk7XG5cbiAgYXdhaXQgcGFnZS5rZXlib2FyZC5wcmVzcyhcIkVzY2FwZVwiKTtcbiAgYXdhaXQgZXhwZWN0KHBhbmVsKS50b0JlSGlkZGVuKCk7XG4gIGF3YWl0IGV4cGVjdChtZW51QnRuKS50b0hhdmVBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsIFwiZmFsc2VcIik7XG5cbiAgYXdhaXQgZXhwZWN0KGF3YWl0IG9wZW5NZW51KHBhZ2UgYXMgUGFnZSkpLnRvQmVUcnV0aHkoKTtcbiAgYXdhaXQgZXhwZWN0KHBhbmVsKS50b0JlVmlzaWJsZSgpO1xuICBhd2FpdCBwYWdlLm1vdXNlLmNsaWNrKDAsIDApO1xuICBhd2FpdCBleHBlY3QocGFuZWwpLnRvQmVIaWRkZW4oKTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUFBLEtBQUEsR0FBQUMsT0FBQTtBQUVBLElBQUFDLFFBQUEsR0FBQUQsT0FBQTtBQUVBLElBQUFFLFVBQUksRUFBQyxnQ0FBZ0MsRUFBRSxPQUFPO0VBQUVDO0FBQUssQ0FBQyxLQUFLO0VBQ3pELE1BQU0sSUFBQUMsc0JBQWEsRUFBQ0QsSUFBWSxDQUFDO0VBQ2pDLE1BQU0sSUFBQUUsYUFBSSxFQUFDRixJQUFJLEVBQVUsK0JBQStCLENBQUM7RUFFekQsTUFBTUcsTUFBTSxHQUFHLE1BQU0sSUFBQUMsaUJBQVEsRUFBQ0osSUFBWSxDQUFDO0VBQzNDLElBQUksQ0FBQ0csTUFBTSxFQUFFO0lBQ1gsTUFBTSxJQUFBRCxhQUFJLEVBQUNGLElBQUksRUFBVSxnQkFBZ0IsQ0FBQztJQUMxQyxNQUFNLElBQUlLLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQztFQUMxQztFQUNBLE1BQU1DLE9BQU8sR0FBR04sSUFBSSxDQUFDTyxXQUFXLENBQUMsVUFBVSxDQUFDO0VBQzVDLE1BQU0sSUFBQUMsWUFBTSxFQUFDRixPQUFPLENBQUMsQ0FBQ0csZUFBZSxDQUFDLGVBQWUsRUFBRSxNQUFNLENBQUM7RUFFOUQsTUFBTUMsS0FBSyxHQUFHVixJQUFJLENBQUNPLFdBQVcsQ0FBQyxZQUFZLENBQUM7RUFDNUMsTUFBTSxJQUFBQyxZQUFNLEVBQUNFLEtBQUssQ0FBQyxDQUFDQyxXQUFXLENBQUMsQ0FBQztFQUVqQyxNQUFNWCxJQUFJLENBQUNZLFFBQVEsQ0FBQ0MsS0FBSyxDQUFDLFFBQVEsQ0FBQztFQUNuQyxNQUFNLElBQUFMLFlBQU0sRUFBQ0UsS0FBSyxDQUFDLENBQUNJLFVBQVUsQ0FBQyxDQUFDO0VBQ2hDLE1BQU0sSUFBQU4sWUFBTSxFQUFDRixPQUFPLENBQUMsQ0FBQ0csZUFBZSxDQUFDLGVBQWUsRUFBRSxPQUFPLENBQUM7RUFFL0QsTUFBTSxJQUFBRCxZQUFNLEVBQUMsTUFBTSxJQUFBSixpQkFBUSxFQUFDSixJQUFZLENBQUMsQ0FBQyxDQUFDZSxVQUFVLENBQUMsQ0FBQztFQUN2RCxNQUFNLElBQUFQLFlBQU0sRUFBQ0UsS0FBSyxDQUFDLENBQUNDLFdBQVcsQ0FBQyxDQUFDO0VBQ2pDLE1BQU1YLElBQUksQ0FBQ2dCLEtBQUssQ0FBQ0MsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7RUFDNUIsTUFBTSxJQUFBVCxZQUFNLEVBQUNFLEtBQUssQ0FBQyxDQUFDSSxVQUFVLENBQUMsQ0FBQztBQUNsQyxDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=