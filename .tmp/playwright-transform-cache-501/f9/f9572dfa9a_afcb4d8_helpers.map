{"version":3,"names":["fsp","_interopRequireWildcard","require","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","seedPlanBase64","payload","date","Date","toISOString","slice","items","time","title","tags","meta","dayOffset","ui","density","showDistance","Buffer","from","JSON","stringify","toString","replace","hookDiagnostics","page","mkdir","recursive","logs","on","m","push","type","text","err","message","_r$failure","failure","errorText","url","__diagLogs","dump","name","writeFile","content","screenshot","path","fullPage","catch","join","waitDemoReady","goto","waitUntil","waitForSelector","state","timeout","waitAny","Promise","any","locator","waitFor","getByRole","reload","waitForTimeout","firstExisting","locs","loc","count","first","tryClickCandidates","scrollIntoViewIfNeeded","click","h","elementHandle","evaluate","el","scrollIntoView","block","inline","toggleDistance","clicked","k","cur","localStorage","getItem","setItem","window","dispatchEvent","StorageEvent","key","newValue","oldValue","toggleSize","next","openMenu","getByTestId","l","menuPanelLocator","cands","readLocalStorage","readVariant","sec","getAttribute","readDistancePressed","btn","closeMenu","panel","keyboard","press","vp","viewportSize","width","height","pts","Math","max","floor","x","y","mouse","btnLocs"],"sources":["helpers.ts"],"sourcesContent":["import type { Page, Locator } from \"@playwright/test\";\nimport * as fsp from \"node:fs/promises\";\n\n// ---- seed ----\nfunction seedPlanBase64() {\n  const payload = {\n    date: new Date().toISOString().slice(0, 10),\n    items: [\n      { time: \"09:00\", title: \"駅 → 観光A\", tags: [\"transfer\"], meta: { dayOffset: 0 } },\n      { time: \"12:00\", title: \"昼食\", meta: { dayOffset: 0 } },\n      { time: \"15:00\", title: \"観光B\", meta: { dayOffset: 0 } },\n      { time: \"18:00\", title: \"夕食\", meta: { dayOffset: 0 } },\n    ],\n    ui: { density: \"cozy\", showDistance: true },\n  };\n  return Buffer.from(JSON.stringify(payload), \"utf8\")\n    .toString(\"base64\")\n    .replace(/\\+/g, \"-\")\n    .replace(/\\//g, \"_\")\n    .replace(/=+$/, \"\");\n}\n\n// ---- diagnostics / dump ----\nexport async function hookDiagnostics(page: Page) {\n  await fsp.mkdir(\".tmp\", { recursive: true });\n  const logs: string[] = [];\n  page.on(\"console\", (m) => logs.push(`[console][${m.type()}] ${m.text()}`));\n  page.on(\"pageerror\", (err) => logs.push(`[pageerror] ${err.message}`));\n  page.on(\"requestfailed\", (r) =>\n    logs.push(`[requestfailed] ${r.failure()?.errorText} ${r.url()}`),\n  );\n  (page as any).__diagLogs = logs;\n}\n\nexport async function dump(page: Page, name = \"last\") {\n  try {\n    await fsp.mkdir(\".tmp\", { recursive: true });\n    await fsp.writeFile(`.tmp/${name}.html`, await page.content());\n    await page.screenshot({ path: `.tmp/${name}.png`, fullPage: true }).catch(() => {});\n    const logs: string[] = (page as any).__diagLogs || [];\n    await fsp.writeFile(`.tmp/${name}.log`, logs.join(\"\\n\"));\n  } catch {}\n}\n\n// ---- wait ready ----\nexport async function waitDemoReady(page: Page): Promise<void> {\n  await hookDiagnostics(page);\n  const url = `/demo-itinerary?plan=${seedPlanBase64()}`;\n  await page.goto(url, { waitUntil: \"domcontentloaded\" });\n\n  try {\n    await page.waitForSelector(\"text=Loading itinerary…\", { state: \"detached\", timeout: 60_000 });\n  } catch {}\n\n  const waitAny = (timeout: number) =>\n    Promise.any([\n      page.waitForSelector(\"[data-toolbar]\", { state: \"visible\", timeout }),\n      page.waitForSelector(\"section[data-variant]\", { state: \"attached\", timeout }),\n      page.locator('[data-slot=\"distance\"]').waitFor({ state: \"visible\", timeout }),\n      page.locator('[data-slot=\"size\"]').waitFor({ state: \"visible\", timeout }),\n      page.getByRole(\"button\", { name: \"距離の表示切替\" }).waitFor({ state: \"visible\", timeout }),\n      page.getByRole(\"button\", { name: \"表示の大きさ\" }).waitFor({ state: \"visible\", timeout }),\n    ]);\n\n  try {\n    await waitAny(60_000);\n  } catch {\n    await dump(page, \"wait-timeout-before-reload\");\n    try {\n      await page.reload({ waitUntil: \"domcontentloaded\" });\n    } catch {}\n    try {\n      await waitAny(40_000);\n    } catch (e) {\n      await dump(page, \"wait-timeout-after-reload\");\n      throw e;\n    }\n  }\n\n  await page.waitForTimeout(120);\n}\n\n// ---- helpers for click / fallback ----\nasync function firstExisting(page: Page, locs: Locator[]): Promise<Locator | null> {\n  for (const loc of locs) {\n    try {\n      if ((await loc.count()) > 0) return loc.first();\n    } catch {}\n  }\n  return null;\n}\n\nasync function tryClickCandidates(page: Page, locs: Locator[]): Promise<boolean> {\n  const loc = await firstExisting(page, locs);\n  if (!loc) return false;\n  try {\n    await loc.scrollIntoViewIfNeeded({ timeout: 5_000 }).catch(() => {});\n    await loc.click({ timeout: 8_000 });\n    return true;\n  } catch {\n    const h = await loc.elementHandle().catch(() => null);\n    if (h) {\n      await h.evaluate((el: HTMLElement) => {\n        try {\n          el.scrollIntoView({ block: \"center\", inline: \"center\" });\n        } catch {}\n        el.click();\n      });\n      return true;\n    }\n    return false;\n  }\n}\n\n// ---- Action API: click or storage toggle ----\nexport async function toggleDistance(page: Page): Promise<void> {\n  const clicked = await tryClickCandidates(page, [\n    page.locator('[data-slot=\"distance\"]'),\n    page.getByRole(\"button\", { name: \"距離の表示切替\" }),\n    page.locator('button[title=\"距離の表示切替\"]'),\n  ]);\n  if (clicked) return;\n\n  await page.evaluate(() => {\n    const k = \"travoru.demo.ui.dist\";\n    const cur = localStorage.getItem(k);\n    localStorage.setItem(k, cur === \"0\" ? \"1\" : \"0\");\n    window.dispatchEvent(\n      new StorageEvent(\"storage\", {\n        key: k,\n        newValue: localStorage.getItem(k)!,\n        oldValue: cur ?? null,\n      }),\n    );\n  });\n}\n\nexport async function toggleSize(page: Page): Promise<void> {\n  const clicked = await tryClickCandidates(page, [\n    page.locator('[data-slot=\"size\"]'),\n    page.getByRole(\"button\", { name: \"表示の大きさ\" }),\n  ]);\n  if (clicked) return;\n\n  await page.evaluate(() => {\n    const k = \"travoru.demo.ui.density\";\n    const cur = localStorage.getItem(k) || \"cozy\";\n    const next = cur === \"cozy\" ? \"compact\" : \"cozy\";\n    localStorage.setItem(k, next);\n    window.dispatchEvent(new StorageEvent(\"storage\", { key: k, newValue: next, oldValue: cur }));\n  });\n}\n\nexport async function openMenu(page: Page): Promise<boolean> {\n  const locs = [\n    page.getByTestId(\"menu-btn\"),\n    page.locator('button[aria-haspopup=\"menu\"]'),\n    page.getByRole(\"button\", { name: /メニュー|menu/i }),\n    page.locator('[data-slot=\"menu\"] :is(button,a[role=\"button\"])'),\n    page.locator('[aria-controls=\"menu-panel\"]'),\n  ];\n  for (const l of locs) {\n    try {\n      if ((await l.count()) > 0) {\n        await l.first().click();\n        return true;\n      }\n    } catch {}\n  }\n  return false;\n}\n\n// どの実装でも menu panel を見つけるロケータ\nexport async function menuPanelLocator(page: Page): Promise<Locator> {\n  const cands: Locator[] = [\n    page.locator('#menu-panel-content[data-testid=\"menu-panel\"]'),\n    page.getByTestId(\"menu-panel\"),\n    page.locator('#menu-panel[role=\"menu\"]'),\n    page.getByRole(\"menu\"),\n  ];\n  for (const l of cands) {\n    try {\n      if ((await l.count()) > 0) return l.first();\n    } catch {}\n  }\n  return page.getByTestId(\"menu-panel\"); // 最後のフォールバック\n}\n\nexport async function readLocalStorage(page: Page, key: string): Promise<string | null> {\n  return await page.evaluate((k) => localStorage.getItem(k), key);\n}\n\nexport async function readVariant(page: Page): Promise<string | null> {\n  const sec = page.locator(\"section[data-variant]\").first();\n  try {\n    await sec.waitFor({ state: \"attached\", timeout: 5000 });\n  } catch {}\n  try {\n    return await sec.getAttribute(\"data-variant\");\n  } catch {\n    return null;\n  }\n}\n\nexport async function readDistancePressed(page: Page): Promise<string | null> {\n  const btn = page.locator('[data-slot=\"distance\"]').first();\n  try {\n    await btn.waitFor({ state: \"attached\", timeout: 5000 });\n  } catch {}\n  try {\n    return await btn.getAttribute(\"aria-pressed\");\n  } catch {\n    return null;\n  }\n}\n\nexport async function closeMenu(page: Page): Promise<void> {\n  const panel = await menuPanelLocator(page as any);\n\n  // 1) ESC\n  await page.keyboard.press(\"Escape\").catch(() => {});\n  try {\n    await panel.waitFor({ state: \"hidden\", timeout: 800 });\n    return;\n  } catch {}\n\n  // 2) 画面外側を数点クリック\n  const vp = page.viewportSize() || { width: 1280, height: 800 };\n  const pts: Array<[number, number]> = [\n    [5, 5],\n    [Math.max(5, Math.floor(vp.width / 2)), 5],\n    [5, Math.max(5, Math.floor(vp.height / 2))],\n    [Math.max(5, vp.width - 10), 5],\n  ];\n  for (const [x, y] of pts) {\n    try {\n      await page.mouse.click(x, y);\n      await panel.waitFor({ state: \"hidden\", timeout: 800 });\n      return;\n    } catch {}\n  }\n\n  // 3) トグル再クリック（通常→JS直接）\n  const btnLocs = [\n    page.getByTestId(\"menu-btn\"),\n    page.locator('button[aria-haspopup=\"menu\"]'),\n    page.getByRole(\"button\", { name: /メニュー|menu/i }),\n    page.locator('[data-slot=\"menu\"] :is(button,a[role=\"button\"])'),\n    page.locator('[aria-controls=\"menu-panel\"]'),\n  ];\n  for (const l of btnLocs) {\n    try {\n      if ((await l.count()) > 0) {\n        const btn = l.first();\n        await btn.click({ timeout: 800 }).catch(() => {});\n        try {\n          await panel.waitFor({ state: \"hidden\", timeout: 800 });\n          return;\n        } catch {}\n        const h = await btn.elementHandle().catch(() => null);\n        if (h) {\n          await h.evaluate((el: HTMLElement) => el.click());\n          try {\n            await panel.waitFor({ state: \"hidden\", timeout: 800 });\n            return;\n          } catch {}\n        }\n      }\n    } catch {}\n  }\n}\n"],"mappings":"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","ignoreList":[]}